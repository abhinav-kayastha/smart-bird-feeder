<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="../css/index.css">
</head>
<body>
    <h1>Smart Bird Feeder Application</h1>
    <p>Use the link below to navigate through the application:</p>
    <ul>
        <li><a href="/activity">Activity Monitor</a></li>
    </ul>

    <h2>Device State</h2>
    <p id="device-state">Loading...</p>
    <h2>Battery Status</h2>
    <p id="battery-status">Loading...</p>

    <script>
        async function fetchLatestState() {
            try {
                const response = await fetch('/latest-state');
                const data = await response.json();
                document.getElementById('device-state').textContent = data.state;
                document.getElementById('battery-status').textContent = data.battery;
            } catch (error) {
                console.error('Error fetching latest state:', error);
                document.getElementById('device-state').textContent = 'Error fetching state';
                document.getElementById('battery-status').textContent = 'Error fetching battery status';
            }
        }

        // Fetch the latest state when the page loads
        window.onload = fetchLatestState;
    </script>
</body>
</html>